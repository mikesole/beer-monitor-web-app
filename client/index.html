
<head>
    
    <!-- jquery.js -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>    
    
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

</head>

<body>
  
    <div id="plotDiv" style="width: 100%; height: 100%;">
        <!-- Plotly chart will be drawn inside this DIV -->
    </div>
    
    <script>
        
        $.getJSON('http://www.brew.mikesole.co.uk/api/SensorReadings', null, function(data){

            //alert(JSON.stringify(data, null, 2));
            
            var num_readings = data.length;
            
            var xs = new Array(num_readings);
            var ys = new Array(num_readings);
            
            // gather data in plotly time series format
            for (var i = 0; i < num_readings; i++) {   
                
                // translate iso time format to plotly time format
                xs[i] = data[i]["timestamp"].replace("T", " ").replace("Z", "");
                
                // gather timestamp data
                ys[i] = data[i]["value"];
                
            }
                        
            var temp = {
                x: xs,
                y: ys,
                type: 'scatter'
            };

            var plot_data = [temp];

            Plotly.newPlot('plotDiv', plot_data);

        });

    </script>
    
</body>
